<!-- Modal -->
<div class="modal fade" id="rsvPop" tabindex="-1" role="dialog" aria-labelledby="rsvModal" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
        <div class="modal-content">

            <!-- BEGIN SELECT NEW OR EXISTENT -->
            <div class="modal-header">
                <div class="d-flex justify-content-end">
                    <div class="p-1 mr-3">
                        <h5 class="modal-title" id="rsvModal">Reservar</h5>
                    </div>
                    <div class="p-1 mr-3">
                        <ui-switch color="#a8b5ff" (change)="chgUser()" size="small" name='exist' [(ngModel)]="isNew" checkedLabel='Nueva' uncheckedLabel='Existente'></ui-switch>
                    </div>
                </div>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <!-- END SELECT NEW OR EXISTENT -->

            <div class="modal-body">

                <!-- BEGIN SEARCH APPS -->
                <app-search-zd-user (selected)="selectedUser($event)" *ngIf="searchUserFlag && isNew"></app-search-zd-user>
                <app-search-loc (selected)="selectedUser($event)" *ngIf="searchUserFlag && !isNew"></app-search-loc>

                <form [formGroup]="newRsvForm" *ngIf="!searchUserFlag">
                    <div class='container d-flex justify-content-center'>
                        <table class="example-full-width" cellspacing="0" [style.width.px]="880">
                            <tr>
                                <td>
                                    <mat-form-field class="example-full-width">
                                        <input matInput placeholder="Nombre" readonly="true" formControlName="nombreCliente">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field class="example-full-width">
                                        <input matInput placeholder="Correo" readonly="true" formControlName="correoCliente">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field class="example-full-width">
                                        <input matInput placeholder="Telefono" readonly="true" formControlName="telCliente">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field class="example-full-width">
                                        <input matInput placeholder="ZendeskId" readonly="true" formControlName="zdUserId">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field class="example-full-width" *ngIf="!isNew">
                                        <input matInput placeholder="Localizador" readonly="true" [(ngModel)]="masterLoc" [ngModelOptions]="{standalone: true}">
                                    </mat-form-field>
                                </td>
                            </tr>
                        </table>
                        <div class='p-1'>
                            <button mat-raised-button type="button" (click)="chgUser()" color="accent" *ngIf="isNew">Cambiar Cliente</button>
                            <button mat-raised-button type="button" (click)="chgUser()" color="accent" *ngIf="!isNew">Cambiar Localizador</button>
                        </div>
                    </div>
                </form>
                <!-- END SEARCH APPS -->

                <!-- BEGIN RSV HOTEL -->
                <div *ngIf="!searchUserFlag && tipo == 'hotel'">
                    <div class="d-flex justify-content-center pb-2">
                        <div class="p-2" style="background-size: cover; background-position: center; width: 140px; height: 75px; border-radius: 10px" [style.background-image]="data['hotelUrl']"></div>
                        <div class="p-2">
                            <h3>{{ data['hotel'] }}</h3>
                            <p><span class=''>Categor√≠a: {{ data['habitacion'] }}</span><span class="text-info"> ({{ data['habCat']}})</span></p>
                        </div>
                    </div>
                    <app-cot-hab-detail [habs]="data['habs']" [level]="data['lSelected']" (total)="total = $event" [moneda]="moneda" [paymentSelect]="true"></app-cot-hab-detail>
                    <div class="d-flex justify-content-end pr-3">

                        <div class="font-weight-bold pr-4">
                            <h4>Total: {{ total | currency:(moneda ? 'MXN' : 'USD'):'symbol-narrow':'.2-2' }}</h4>
                        </div>

                    </div>
                </div>
                <!-- END RSV HOTEL -->

                <!-- BEGIN RSV DAYPASS -->
                <div class="d-flex justify-content-center flex-wrap align-items-center " *ngIf="!searchUserFlag && tipo == 'daypass'">
                    <div class="d-flex justify-content-center pb-2">
                        <div class="p-2" style="background-size: cover; background-position: center; width: 140px; height: 75px; border-radius: 10px" [style.background-image]="data['hotelUrl']"></div>
                        <div class="p-2">
                            <h3>{{ data['hotel'] }}</h3>
                            <p><span class=''>{{ data['dayPassType'] }}</span></p>
                        </div>
                    </div>
                    <div class="d-flex justify-content-end ml-5">

                        <div class="font-weight-bold pr-4">
                            <h5>Fecha: {{ printDate(data['fecha'], 'ddd DD MMM \'YY') }} </h5>
                            <h5>para {{ data['adultos'] }} Adultos, {{ data['menores'] }} Menores por <span class="text-primary">{{ (moneda ? data['totalMXN'] : data['totalUSD']) | currency:(moneda ? 'MXN' : 'USD'):'symbol-narrow':'.2-2' }} {{ moneda ? 'MXN' : 'USD' }}</span></h5>
                        </div>

                    </div>
                </div>
                <!-- END RSV DAYPASS -->
            </div>

            <!-- BEGIN BOTONES COTIZACION Y RESERVA -->
            <div class="modal-footer">
                <button type="button" mat-raised-button color="warn" data-dismiss="modal" (click)="chgUser()" [disabled]="loading['save']">Cancelar</button>
                <button type="button" mat-raised-button color="primary" (click)="saveRsv()" [disabled]="newRsvForm.status=='INVALID' || loading['save'] || searchUserFlag">Reservar  <span *ngIf="loading['save']"><i class="fas fa-spinner fa-pulse"></i></span></button>
            </div>
            <!-- END BOTONES COTIZACION Y RESERVA -->
        </div>
    </div>
</div>